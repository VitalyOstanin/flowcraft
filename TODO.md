# TODO - Сложные задачи для будущей реализации

## Содержание

1. [MCP интеграция](#1-mcp-интеграция)
2. [LLM провайдеры](#2-llm-провайдеры)
3. [~~LangGraph workflow~~](#3-langgraph-workflow) ✓ Выполнено
4. [~~Управление этапами workflow~~](#4-управление-этапами-workflow) ✓ Выполнено
5. [Интерактивный CLI с автодополнением](#5-интерактивный-cli-с-автодополнением)
6. [Система команд управления](#6-система-команд-управления)

## 1. MCP интеграция

### Сложность
Требует глубокого понимания MCP протокола и его реализации.

### Задачи
- Реализация MCP клиента для взаимодействия с серверами
- Управление жизненным циклом MCP процессов
- Обработка ошибок и переподключений
- Workflow-специфичное управление серверами

### Зависимости
- Изучение MCP спецификации
- Тестирование с реальными MCP серверами

## 2. LLM провайдеры

### Сложность
Требует интеграции с различными API и обработки их особенностей.

### Задачи
- Интеграция с qwen-code API
- Интеграция с kiro-cli в неинтерактивном режиме
- LLM Router для автоматического выбора модели
- Обработка ошибок и ретраев

### Зависимости
- Доступ к API ключам
- Тестирование с реальными моделями

## 3. LangGraph workflow - ВЫПОЛНЕНО

### Сложность
Требует глубокого понимания LangGraph архитектуры и состояний.

### Задачи - ВЫПОЛНЕНО
- ✅ Создание базового класса BaseWorkflow
- ✅ Интеграция с LangGraph checkpointers
- ✅ Система состояний WorkflowState
- ✅ Условные переходы и human-in-the-loop
- ✅ Динамически конфигурируемые подграфы (subgraphs)
- ✅ Модульная система для переиспользования компонентов
- ✅ Композиция workflow из переиспользуемых блоков

### Зависимости - ВЫПОЛНЕНО
- ✅ Изучение LangGraph документации
- ✅ Проектирование схемы состояний
- ✅ Архитектура модульных подграфов

### Реализованные компоненты
- WorkflowEngine - основной движок выполнения
- WorkflowState - система состояний с TypedDict
- Узлы: StartNode, EndNode, AgentNode, HumanInputNode, ConditionalNode
- Система подграфов: BaseSubgraph, SubgraphRegistry
- Стандартные подграфы: CodeAnalysis, Testing, Security, Deployment, Documentation
- LLM интеграция через WorkflowLLMManager
- Полная интеграция с CLI и WorkflowManager

## 4. Управление этапами workflow - ВЫПОЛНЕНО

### Сложность
Требует создания CRUD системы для этапов с поддержкой команд от LLM.

### Задачи - ВЫПОЛНЕНЫ
- ✅ StageManager для CRUD операций с этапами
- ✅ StageCommandProcessor для обработки команд от LLM
- ✅ Интеграция с WorkflowManager
- ✅ CLI интерфейс для управления этапами
- ✅ Поддержка enable/disable этапов
- ✅ Система подтверждения команд от LLM
- ✅ Комплексное тестирование

### Реализованные компоненты
- WorkflowStage - модель этапа с полями name, description, roles, enabled
- StageManager - CRUD операции для этапов workflow
- StageCommandProcessor - парсинг и выполнение команд от LLM
- CLI интерфейс в interactive_cli.py для управления этапами
- Интеграция с WorkflowManager через новые методы
- Система подтверждения для команд от LLM с callback функциями

## 5. Интерактивный CLI с автодополнением

### Сложность
Требует сложной интеграции prompt_toolkit и rich для красивого интерфейса.

### Задачи
- Автодополнение команд и параметров
- Красивое отображение прогресса workflow
- Интерактивные таблицы и меню
- История команд

### Зависимости
- Глубокое изучение prompt_toolkit
- Дизайн пользовательского интерфейса

## 6. Система команд управления

### Сложность
Требует парсинга команд и интеграции с различными менеджерами.

### Задачи
- Парсер команд с валидацией
- LLM-инициированные команды с подтверждением
- Динамическое управление во время выполнения
- Обработка ошибок команд

### Зависимости
- Завершение базовых менеджеров
- Интеграция с LLM для предложений
